defmodule JurassicJigsawTest do
  use ExUnit.Case

  alias JurassicJigsaw.{PartOne, PartTwo}

  test "part one", %{input: input} do
    assert 20_899_048_083_289 ==
             input
             |> String.trim()
             |> JurassicJigsaw.parse()
             |> PartOne.find_corners()
             |> PartOne.id_product()
  end

  test "part two", %{input: input} do
    assert 273 =
             input
             |> String.trim()
             |> JurassicJigsaw.parse()
             |> PartTwo.solve()
  end

  setup _context do
    {:ok,
     input: """
     Tile 2311:
     ..##.#..#.
     ##..#.....
     #...##..#.
     ####.#...#
     ##.##.###.
     ##...#.###
     .#.#.#..##
     ..#....#..
     ###...#.#.
     ..###..###

     Tile 1951:
     #.##...##.
     #.####...#
     .....#..##
     #...######
     .##.#....#
     .###.#####
     ###.##.##.
     .###....#.
     ..#.#..#.#
     #...##.#..

     Tile 1171:
     ####...##.
     #..##.#..#
     ##.#..#.#.
     .###.####.
     ..###.####
     .##....##.
     .#...####.
     #.##.####.
     ####..#...
     .....##...

     Tile 1427:
     ###.##.#..
     .#..#.##..
     .#.##.#..#
     #.#.#.##.#
     ....#...##
     ...##..##.
     ...#.#####
     .#.####.#.
     ..#..###.#
     ..##.#..#.

     Tile 1489:
     ##.#.#....
     ..##...#..
     .##..##...
     ..#...#...
     #####...#.
     #..#.#.#.#
     ...#.#.#..
     ##.#...##.
     ..##.##.##
     ###.##.#..

     Tile 2473:
     #....####.
     #..#.##...
     #.##..#...
     ######.#.#
     .#...#.#.#
     .#########
     .###.#..#.
     ########.#
     ##...##.#.
     ..###.#.#.

     Tile 2971:
     ..#.#....#
     #...###...
     #.#.###...
     ##.##..#..
     .#####..##
     .#..####.#
     #..#.#..#.
     ..####.###
     ..#.#.###.
     ...#.#.#.#

     Tile 2729:
     ...#.#.#.#
     ####.#....
     ..#.#.....
     ....#..#.#
     .##..##.#.
     .#.####...
     ####.#.#..
     ##.####...
     ##..#.##..
     #.##...##.

     Tile 3079:
     #.#.#####.
     .#..######
     ..#.......
     ######....
     ####.#..#.
     .#...#.##.
     #.#####.##
     ..#.###...
     ..#.......
     ..#.###...
     """}
  end
end
